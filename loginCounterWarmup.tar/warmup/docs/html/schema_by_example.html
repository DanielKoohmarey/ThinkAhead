<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>CS169 Warmup Project: Schemas By Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CS169 Warmup Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Schemas By Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Schemas-by-example is a library for validating JSON schemas based on schema specifications in the form of examples.</p>
<p>Schemas are high-level description of structured objects. A schema defines the type of the object and its components, additional validation conditions, and documentation strings. A schema can be used for validation, and also to generate documentation.</p>
<p>There is a standard for <a href="http://json-schema.org/">JSON schemas</a> but I found it too tedious to write those complex schemas. Plus, the standard does not easily support conditional schemas where a base schema is extended if certain fields have certain values. Instead, this module is designed with the following features in mind:</p>
<ul>
<li>A schema can be created by simply saving an example data and pasting it as a Python "repr" value.</li>
<li>It should be easy to define schema extensions based on conditionals on object data. For example, if the field 'type' has value 'cake', then there should also be a numeric field named 'calories' in the object. This is useful for example when defining multiple versions of a schema that can co-exist.</li>
<li>It should be easy to augment a simple schema with annotation about optional fields, documentation strings, and extra validators.</li>
<li>The schemas can be built programatically since they are Python data structures.</li>
<li>It should be easy to generate documentation for schemas.</li>
</ul>
<p>An example of a simple schema is: </p>
<pre class="fragment">schema1 = { 'ver' : 5,
  'bar' : [ { 'field1' : 'string',
              'field2' : True
            }
          ]
}

Schema.validate(schema1, someObject, objName="theObject")
html = Schema.htmlDoc(schema1)
</pre><p>The schema above will validate a dictionary with a field 'ver' of numeric type, and a field 'bar', whose type is a list of zero or more dictionaries, each with two fields, 'field1' of type string, and 'field2' of type boolean.</p>
<p>We describe below the different kinds of schema elements and how they validate:</p>
<table class="doxtable">
<tr>
<th><a class="el" href="classschemas_by_example_1_1_schema.html" title="The main class.">Schema</a> example</th><th><a class="el" href="classschemas_by_example_1_1_schema.html" title="The main class.">Schema</a> kind</th><th>Validation </th></tr>
<tr>
<td>5</td><td>integer value</td><td>any number (integer, long, float) </td></tr>
<tr>
<td>True</td><td>boolean value</td><td>any boolean </td></tr>
<tr>
<td>"string"</td><td>string value</td><td>any string </td></tr>
<tr>
<td>[ ]</td><td>empty list value</td><td>any list or tuple. No validation for the list elements. </td></tr>
<tr>
<td>[ S ]</td><td>list with one schema</td><td>a list or tuple, the schema is used to validate <b>all</b> the list elements. </td></tr>
<tr>
<td>[ S1, S2 ]</td><td>list with more than one schema</td><td>a list or tuple with same number of elements as the schema, and each element is validated with the corresponding schema element </td></tr>
<tr>
<td>( S1, S2 )</td><td>tuple with more than one schema</td><td>same as [ S1, S2 ] </td></tr>
<tr>
<td>{ }</td><td>empty dictionary</td><td>any dictionary. No validation for the dictionary values </td></tr>
<tr>
<td>{ 'key1' : S1, 'key2' : S2}</td><td>non-empty dictionary with string keys</td><td>a dictionary with the same keys as the schema. The schema elements are used to validate the dictionary values </td></tr>
<tr>
<td>{ <a class="el" href="classschemas_by_example_1_1_schema.html#a8ccc6073a7bb02c169967f62c8912132">Schema.allValues</a> : S } </td><td>dictionary with one element with the special key <a class="el" href="classschemas_by_example_1_1_schema.html#a8ccc6073a7bb02c169967f62c8912132">Schema.allValues</a> </td><td>A dictionary used as a collection, the schema element is used to validate the values of the dictionary </td></tr>
<tr>
<td>None</td><td></td><td>any value, with a warning. Use <a class="el" href="classschemas_by_example_1_1_schema.html#ab07675e01942b344133baf471473385d">Schema.anything</a> instead </td></tr>
<tr>
<td><a class="el" href="classschemas_by_example_1_1_schema.html#ab07675e01942b344133baf471473385d">Schema.anything</a> </td><td></td><td>any value </td></tr>
<tr>
<td><a class="el" href="classschemas_by_example_1_1_schema.html" title="The main class.">Schema</a>(S, ...) </td><td>An object version of the schema S, with more features</td><td>Validates like S, except that ... can specify additional documentation and validation options: <ul>
<li>
doc='something' : specify some documentation for this field </li>
<li>
opt=True : specify that the field may be missing. Makes sense for the schema for a field in a dictionary </li>
<li>
nullable=True : the value may be null (None in Python) </li>
<li>
<p class="startli">valid=[] : either one additional <a class="el" href="classschemas_by_example_1_1_schema_validator.html" title="Additional schema validations.">SchemaValidator</a>, or a list of <a class="el" href="classschemas_by_example_1_1_schema_validator.html" title="Additional schema validations.">SchemaValidator</a></p>
<p class="endli"></p>
</li>
</ul>
</td></tr>
<tr>
<td>S.when(...cond..., doc=str, update=dict) </td><td>S must be a <a class="el" href="classschemas_by_example_1_1_schema.html" title="The main class.">Schema</a> object for a dictionary schema. The value of the update parameter is a dictionary </td><td>Evaluates the condition ...cond... on the actual object to be validated, and if true, then validates with S.update(dict), otherwise with S. You can specify a documentation string for this extension. All conditions must be true for the update to take effect. The conditions can be of the form: <ul>
<li>
field__exists = True : if the field exists in the object. </li>
<li>
field__neq = val : if the field does not have the given value. Also true if the field does not exist. </li>
<li>
field__eq = val : if the field has the given value. </li>
<li>
field__notin = [ vals ] : if the field is not equal to any of the list elements. Also true if the field does not exist. </li>
<li>
field__geq = val : if the field is greater-or-equal to the given value. </li>
<li>
field__leq = val : if the field is less-or-equal to the given value. </li>
</ul>
In the update dictionary you can specify new fields not already in S, or you can override fields already in S. </td></tr>
</table>
<p>Following is an example of a more elaborate schema, with some documentation strings, and marking some fields optional and nullable: </p>
<pre class="fragment">schema2 = { 'ver' : Schema(5, doc='The value of the version parameter'),
              'bar' : [ { 'field1' : Schema('string', nullable=True),
                          'field2' : Schema(True, opt=True)
                        }
                      ],
              'baz' : barElements
}
</pre><p>And now an example using extensions </p>
<pre class="fragment">schema3 = Schema(schema2, doc='Base schema').when(ver__geq=2, doc="Version 2",
                                                  update={
                                                     'field3' : "a new string field",
                                                     'field4' : Schema(12, nullable=True)
                                                  }
                                             ).when(ver__geq=2, field4__exists=True, doc="Version 2, when field4 exists",
                                                  update={
                                                      'field4' : Schema(0, valid=SchemaValidator.geq(0)),
                                                      'field3' : 5
                                                  })
</pre><p>In the above example we extended schema2 with two additional variants, one when the version field 'ver' is greater-or-equal to 2, and one when also field4 is part of the object. In the latter case, field3 will override the specification to make the field non-nullable.</p>
<p>For further documentation check out the implementation in classes <a class="el" href="classschemas_by_example_1_1_schema.html" title="The main class.">Schema</a> and <a class="el" href="classschemas_by_example_1_1_schema_validator.html" title="Additional schema validations.">SchemaValidator</a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
</body>
</html>
